# Maple Quest AWS Architecture

## Current Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   INTERNET                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AWS GLOBAL SERVICES                                â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                            S3 BUCKET                                    â”‚    â”‚
â”‚  â”‚                    maple-quest-images-xxx-region                        â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â€¢ Public Read Access âœ…                                               â”‚    â”‚
â”‚  â”‚  â€¢ CORS Enabled âœ…                                                     â”‚    â”‚
â”‚  â”‚  â€¢ User Images Storage                                                  â”‚    â”‚
â”‚  â”‚  â€¢ Location Default Images                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        CLOUDWATCH LOGS                                  â”‚    â”‚
â”‚  â”‚                      /ecs/maple-quest-new                               â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â€¢ ECS Task Logs                                                        â”‚    â”‚
â”‚  â”‚  â€¢ 1 Week Retention                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                AWS REGION                                       â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                              VPC                                        â”‚    â”‚
â”‚  â”‚                           (2 AZs)                                       â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚
â”‚  â”‚  â”‚   AVAILABILITY      â”‚              â”‚   AVAILABILITY      â”‚           â”‚    â”‚
â”‚  â”‚  â”‚      ZONE A         â”‚              â”‚      ZONE B         â”‚           â”‚    â”‚
â”‚  â”‚  â”‚                     â”‚              â”‚                     â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ PUBLIC SUBNET â”‚  â”‚              â”‚  â”‚ PUBLIC SUBNET â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚               â”‚  â”‚              â”‚  â”‚               â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚              â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚    ALB    â”‚ â”‚  â”‚              â”‚  â”‚ â”‚    ALB    â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ (Public)  â”‚ â”‚  â”‚              â”‚  â”‚ â”‚ (Public)  â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ Port: 80  â”‚ â”‚  â”‚              â”‚  â”‚ â”‚ Port: 80  â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚              â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚       â”‚       â”‚  â”‚              â”‚  â”‚       â”‚       â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚       â–¼       â”‚  â”‚              â”‚  â”‚       â–¼       â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚              â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ECS FARGATEâ”‚ â”‚  â”‚              â”‚  â”‚ â”‚ECS FARGATEâ”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚   TASK    â”‚ â”‚  â”‚              â”‚  â”‚ â”‚   TASK    â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚           â”‚ â”‚  â”‚              â”‚  â”‚ â”‚           â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚Django App â”‚ â”‚  â”‚              â”‚  â”‚ â”‚Django App â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚Port: 8000 â”‚ â”‚  â”‚              â”‚  â”‚ â”‚Port: 8000 â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â”‚Public IP âœ…â”‚ â”‚  â”‚              â”‚  â”‚ â”‚Public IP âœ…â”‚ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚              â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚       â”‚       â”‚  â”‚              â”‚  â”‚       â”‚       â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚          â”‚          â”‚              â”‚          â”‚          â”‚           â”‚    â”‚
â”‚  â”‚  â”‚          â–¼          â”‚              â”‚          â–¼          â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ âš ï¸  RDS DB   â”‚  â”‚              â”‚  â”‚ âš ï¸  RDS DB   â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ (PostgreSQL)  â”‚  â”‚              â”‚  â”‚ (PostgreSQL)  â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚               â”‚  â”‚              â”‚  â”‚               â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ Public IP âš ï¸  â”‚  â”‚              â”‚  â”‚ Public IP âš ï¸  â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ Port: 5432    â”‚  â”‚              â”‚  â”‚ Port: 5432    â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ 0.0.0.0/0 âš ï¸  â”‚  â”‚              â”‚  â”‚ 0.0.0.0/0 âš ï¸  â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚                     â”‚              â”‚                     â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚PRIVATE SUBNET â”‚  â”‚              â”‚  â”‚PRIVATE SUBNET â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   (Unused)    â”‚  â”‚              â”‚  â”‚   (Unused)    â”‚  â”‚           â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              EXTERNAL ACCESS                                    â”‚
â”‚                                                                                 â”‚
â”‚  ğŸ“± iOS App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                                                               â”‚ â”‚
â”‚  â”Œâ”€ HTTP Requests â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ POST /auth/login/                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ GET /api/locations/                                                   â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ POST /api/locations/{id}/visit/                                       â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ POST /api/users/generate_upload_url/                                  â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ GET /api/users/friends/                                               â”‚ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                                                                               â”‚ â”‚
â”‚  â”Œâ”€ S3 Direct Upload â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ PUT https://bucket.s3.region.amazonaws.com/images/user/photo.jpg     â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ GET https://bucket.s3.region.amazonaws.com/locations/default.jpg     â”‚ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                                                                               â”‚ â”‚
â”‚  ğŸ”§ DBeaver (Dev Tool) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€ Direct DB Connection âš ï¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                            â”‚ â”‚
â”‚  â”‚  â€¢ Host: maple-quest-db.xxx.rds.amazonaws.com                             â”‚ â”‚
â”‚  â”‚  â€¢ Port: 5432                                                             â”‚ â”‚
â”‚  â”‚  â€¢ âš ï¸ SECURITY RISK: Open to entire internet                              â”‚ â”‚
â”‚  â”‚                                                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Details

### ğŸŒ **Internet-Facing Components**

| Component                     | Access      | Security    | Purpose                             |
| ----------------------------- | ----------- | ----------- | ----------------------------------- |
| **Application Load Balancer** | Public      | âœ… Secure   | Routes HTTP traffic to ECS tasks    |
| **S3 Bucket**                 | Public Read | âœ… Secure   | Serves images to iOS app            |
| **RDS Database**              | Public      | âš ï¸ **RISK** | Database access (should be private) |

### ğŸ—ï¸ **VPC Resources**

| Resource                      | Subnet Type | Public IP | Security                   |
| ----------------------------- | ----------- | --------- | -------------------------- |
| **ECS Fargate Tasks**         | Public      | Yes       | âœ… Protected by ALB        |
| **RDS PostgreSQL**            | Public      | Yes       | âš ï¸ **Exposed to internet** |
| **Application Load Balancer** | Public      | Yes       | âœ… Properly configured     |

### ğŸ“Š **Data Flow**

```
1. iOS App â†’ ALB (Port 80) â†’ ECS Task (Port 8000) â†’ RDS (Port 5432)
2. iOS App â†’ S3 Bucket (Direct HTTPS) â†’ Image Upload/Download
3. DBeaver â†’ RDS (Direct Port 5432) âš ï¸ Security Risk
```

## ğŸš¨ Security Issues

### **Critical: Database Exposure**

- **Issue**: RDS database is publicly accessible from anywhere
- **Risk**: Potential unauthorized access to sensitive data
- **Current**: `0.0.0.0/0` can connect to port 5432
- **Impact**: High security vulnerability

### **Recommendations**

1. Move RDS to private subnets
2. Remove public accessibility
3. Use bastion host or VPN for development access
4. Implement proper security groups

## ğŸ”§ **Environment Variables**

### **ECS Task Environment**

```bash
SECRET_KEY=xxx
DEBUG=False
ALLOWED_HOSTS=*
S3_BUCKET_NAME=maple-quest-images-xxx-region
AWS_REGION=us-west-2
```

### **ECS Task Secrets (from AWS Secrets Manager)**

```bash
DB_NAME=maplequest
DB_USER=postgres
DB_PASSWORD=xxx (from secrets manager)
DB_HOST=maple-quest-db.xxx.rds.amazonaws.com
DB_PORT=5432
```

## ğŸ“ˆ **Scaling & Performance**

| Component     | Current      | Scaling                |
| ------------- | ------------ | ---------------------- |
| **ECS Tasks** | 1 instance   | Auto-scaling available |
| **RDS**       | t4g.micro    | Vertical scaling       |
| **ALB**       | Auto-scaling | AWS managed            |
| **S3**        | Unlimited    | AWS managed            |

## ğŸ’° **Cost Optimization**

| Service           | Instance Type     | Cost Impact |
| ----------------- | ----------------- | ----------- |
| **ECS Fargate**   | 0.5 vCPU, 1GB RAM | ~$15/month  |
| **RDS**           | t4g.micro         | ~$15/month  |
| **ALB**           | Standard          | ~$20/month  |
| **S3**            | Pay per use       | Variable    |
| **Data Transfer** | Pay per GB        | Variable    |

## ğŸ”„ **Recommended Architecture**

For improved security, the database should be moved to private subnets:

```
Internet â†’ ALB (Public) â†’ ECS Tasks (Public) â†’ RDS (Private)
                                            â†— S3 (Global)
```

This would eliminate the direct internet access to your database while maintaining all functionality.
